ğŸš€ å¿«é€Ÿå¼€å§‹
===================================


1. åœ°å›¾åŒ¹é…ç¤ºä¾‹
--------------------

1.1. å®‰è£…gotrackit
```````````````````````
å®‰è£…æ•™ç¨‹è§ï¼š:doc:`å¦‚ä½•ä½¿ç”¨`


1.2. æ•°æ®ä¸‹è½½
```````````````````````
ä»GitHubä»“åº“ä¸‹è½½æ ·ä¾‹æ•°æ®ï¼š`QuickStart-Match-1 <https://github.com/zdsjjtTLG/TrackIt/tree/main/data/input/QuickStart-Match-1>`_

æˆ–è€…ä»ç™¾åº¦ç½‘ç›˜ä¸‹è½½æ ·ä¾‹æ•°æ®ï¼š`QuickStart-Match-1 <https://pan.baidu.com/s/11UdmhGJKMz3O9vmGHHSm3A?pwd=kn74>`_


1.3. åŒ¹é…ä»£ç 1 - éç¨€ç–æ•°æ®
``````````````````````````````
.. code-block:: python
    :linenos:


    import pandas as pd
    import geopandas as gpd
    from gotrackit.map.Net import Net
    from gotrackit.MapMatch import MapMatch
    from gotrackit.gps.Trajectory import TrajectoryPoints

    # è¯»å–GPSæ ·ä¾‹æ•°æ®
    gps_df = pd.read_csv(r'./data/input/QuickStart-Match-1/example_gps.csv')

    # åˆ©ç”¨gpsæ•°æ®æ„å»ºTrajectoryPoints, å¹¶ä¸”å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—
    # æ˜¯å¦éœ€è¦è¿›è¡Œè¯¥æ­¥æ“ä½œè§†å®é™…æƒ…å†µè€Œå®š
    tp = TrajectoryPoints(gps_points_df=gps_df, plain_crs='EPSG:32649')
    tp.lower_frequency(lower_n=2).kf_smooth(o_deviation=0.3)  # ç”±äºæ ·ä¾‹æ•°æ®å®šä½é¢‘ç‡é«˜ä¸”æœ‰ä¸€å®šçš„è¯¯å·®ï¼Œå› æ­¤å…ˆåšé—´éš”é‡‡æ ·ç„¶åæ‰§è¡Œæ»¤æ³¢å¹³æ»‘
    gps_df = tp.trajectory_data(_type='df')

    # è¯»å–è·¯ç½‘æ•°æ®å¹¶ä¸”æ„å»ºNetç±»ã€åˆå§‹åŒ–
    link = gpd.read_file(r'./data/input/net/xian/modifiedConn_link.shp')
    node = gpd.read_file(r'./data/input/net/xian/modifiedConn_node.shp')
    my_net = Net(link_gdf=link, node_gdf=node, not_conn_cost=1200)
    my_net.init_net()  # netåˆå§‹åŒ–

    # æ„å»ºåŒ¹é…ç±»
    # æŒ‡å®šè¦è¾“å‡ºHTMLå¯è§†åŒ–æ–‡ä»¶
    mpm = MapMatch(net=my_net, gps_buffer=120, flag_name='general_sample',
                   use_heading_inf=True, omitted_l=6.0, export_html=True, del_dwell=False,
                   out_fldr=r'./data/output/match_visualization/QuickStart-Match-1', dense_gps=False,
                   gps_radius=20.0)

    # æ‰§è¡ŒåŒ¹é…
    # ç¬¬ä¸€ä¸ªè¿”å›ç»“æœæ˜¯åŒ¹é…ç»“æœè¡¨
    # ç¬¬äºŒä¸ªæ˜¯å‘ç”Ÿè­¦å‘Šçš„agentçš„ç›¸å…³ä¿¡æ¯({agent_id1: pd.DataFrame(), agent_id2: pd.DataFrame()...})
    # ç¬¬ä¸‰ä¸ªæ˜¯åŒ¹é…å‡ºé”™çš„agentçš„idåˆ—è¡¨(GPSç‚¹ç»è¿‡é¢„å¤„ç†(æˆ–è€…åŸå§‹æ•°æ®)åç‚¹æ•°é‡ä¸è¶³2ä¸ª)
    match_res, warn_info, error_info = mpm.execute(gps_df=gps_df)
    match_res.to_csv(fr'./data/output/match_visualization/QuickStart-Match-1/general_match_res.csv',
                     encoding='utf_8_sig', index=False)

1.4. åŒ¹é…ä»£ç 1 - ç¨€ç–æ•°æ®
``````````````````````````````
.. code-block:: python
    :linenos:

    import pandas as pd
    import geopandas as gpd
    from gotrackit.map.Net import Net
    from gotrackit.MapMatch import MapMatch
    from gotrackit.gps.Trajectory import TrajectoryPoints

    # è¯»å–GPSæ ·ä¾‹æ•°æ®
    gps_df = pd.read_csv(r'./data/input/QuickStart-Match-1/example_sparse_gps.csv')

    # åˆ©ç”¨gpsæ•°æ®æ„å»ºTrajectoryPoints, æ˜¯å¦éœ€è¦è¿›è¡Œè¯¥æ­¥æ“ä½œè§†å®é™…æƒ…å†µè€Œå®š
    tp = TrajectoryPoints(gps_points_df=gps_df, plain_crs='EPSG:32649')
    tp.dense(dense_interval=120)  # ç”±äºæ ·ä¾‹æ•°æ®æ˜¯ç¨€ç–å®šä½æ•°æ®ï¼Œæˆ‘ä»¬åœ¨åŒ¹é…å‰è¿›è¡Œå¢å¯†å¤„ç†
    gps_df = tp.trajectory_data(_type='df')
    tp.export_html(out_fldr=r'./data/output/match_visualization/QuickStart-Match-1')  # è¾“å‡ºå¢å¯†å‰åçš„è½¨è¿¹å¯¹æ¯”

    # è¯»å–è·¯ç½‘æ•°æ®å¹¶ä¸”æ„å»ºNetç±»ã€åˆå§‹åŒ–
    link = gpd.read_file(r'./data/input/net/xian/modifiedConn_link.shp')
    node = gpd.read_file(r'./data/input/net/xian/modifiedConn_node.shp')
    my_net = Net(link_gdf=link, node_gdf=node, not_conn_cost=1200)
    my_net.init_net()  # netåˆå§‹åŒ–

    # ç”±äºè½¨è¿¹ç‚¹ä¸­å¤§éƒ¨åˆ†ç‚¹æ˜¯å¢å¯†åçš„ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†gps_bufferè°ƒå¤§æ‰èƒ½ç¡®ä¿è½¨è¿¹ç‚¹å…³è”åˆ°è·¯æ®µ
    # ç”±äºæˆ‘ä»¬å·²ç»æå‰å°†GPSæ•°æ®è¿›è¡Œå¢å¯†ï¼Œå› æ­¤ä¸éœ€è¦ä½¿ç”¨MapMatchä¸­çš„å¢å¯† - dense_gps=False
    mpm = MapMatch(net=my_net, gps_buffer=700, top_k=20, flag_name='sparse_sample',
                   export_html=True,
                   out_fldr=r'./data/output/match_visualization/QuickStart-Match-1', dense_gps=False,
                   gps_radius=15.0)


    # æ‰§è¡ŒåŒ¹é…
    # ç¬¬ä¸€ä¸ªè¿”å›ç»“æœæ˜¯åŒ¹é…ç»“æœè¡¨
    # ç¬¬äºŒä¸ªæ˜¯å‘ç”Ÿè­¦å‘Šçš„agentçš„ç›¸å…³ä¿¡æ¯({agent_id1: pd.DataFrame(), agent_id2: pd.DataFrame()...})
    # ç¬¬ä¸‰ä¸ªæ˜¯åŒ¹é…å‡ºé”™çš„agentçš„idåˆ—è¡¨(GPSç‚¹ç»è¿‡é¢„å¤„ç†(æˆ–è€…åŸå§‹æ•°æ®)åç‚¹æ•°é‡ä¸è¶³2ä¸ª)
    match_res, warn_info, error_info = mpm.execute(gps_df=gps_df)
    match_res.to_csv(fr'./data/output/match_visualization/QuickStart-Match-1/general_match_res.csv',
                     encoding='utf_8_sig', index=False)


1.3. ç»“æœè¾“å‡ºä¸å¯è§†åŒ–
```````````````````````

1.3.1. è½¨è¿¹é¢„å¤„ç†å‰åå¯¹æ¯”å¯è§†åŒ–
::::::::::::::::::::::::::::::::::::::::::::::::


1.3.2. åŒ¹é…ç»“æœå¯è§†åŒ–
::::::::::::::::::::::::::::::::::::::::::::::::

åŒ¹é…è§£è§£é›‡å¯è§†åŒ–